# Использованный метод

Имеем папку со шрифтами. Возможно, перегоняем имеющиеся TTF в WOFF и WOFF2. Нам нужны только последние два формата.

Делаем отдельные CSS-файлы, в которых пишем подключения шрифтов. Один файл для подключения всех шрифтов в формате WOFF, другой для WOFF2 (внутри обоих файлов может быть сколь угодно много конструкций `@font-face`).

При сборке эти CSS-файлы обрабатываются таким образом, что вместо указанных в `url()` файлов вставляется base64-кодированное содержимое файлов. Результат записывается в папку сборки с сохранением имени CSS-файла. Имена обрабатываемых файлов указаны в `gulpfile.js`, если меняете имя файла в файловой системе, смените его и в `gulpfile.js`.

В HTML внедряем JS (см. `font_loading.js`), который:

0. проверяет есть ли в localStorage запись про шрифт, если есть, останавливается; если нет, переходит к п.1
1. проверяет какой формат (WOFF/WOFF2) лучше использовать
2. скачивает CSS-файл со шрифтом в подходящем формате
3. пишет содержимое скачанного файла в localStorage
4. вставляет в head фрагмент стилей с содержимым скачанного файла


Пример вызова скрипта:

```
// Вызываем функцию подгрузки (пишем в файлах разметки)
loadFont(
  'Open Sans_my',                      // название шрифта
 '/css/font_opensans_woff.css?v=1',   // откуда с сервака тянуть CSS с закодированным в base64 форматом WOFF
  '/css/font_opensans_woff2.css?v=1'   // откуда с сервака тянуть CSS с закодированным в base64 форматом WOFF2
);
```
